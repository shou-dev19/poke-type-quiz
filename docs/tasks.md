# ポケモンタイプ相性クイズアプリ開発タスク

## プロジェクト概要

requirements.mdで定義された要件とdesign.mdで設計されたアーキテクチャに基づき、ポケモンタイプ相性クイズアプリを完成させるための開発タスクリスト。

現在、FigmaデザインからエクスポートされたTypeScriptコードは既に配置済みで、基本的なコンポーネント構造は実装済み。

## 実装状況サマリー

### ✅ 完了済み

- 要件定義（requirements.md）
- 技術設計（design.md）
- Figmaデザイン作成・エクスポート
- 基本コンポーネント実装（App.tsx, StartScreen, QuizScreen, ResultScreen, AttackAnimation）
- 型定義（pokemon.ts）
- ビジネスロジック（quizLogic.ts）
- shadcn/ui コンポーネント一式
- TypeIconコンポーネント（仮実装・絵文字ベース）

### ❌ 未完了・要修正

- プロジェクト環境設定（package.json、ビルドツール）
- TypeIconコンポーネントの改善（type_table.pngベース）
- 難易度「むずかしい」の仕様変更対応
- テスト実装
- 品質確認・デバッグ

---

## Phase 1: プロジェクト環境構築

**優先度: 🔴 Critical**

### Task 1.1: 基本プロジェクト設定

- [ ] **T001**: `package.json`の作成
  - React 18, TypeScript, Vite設定
  - 必要な依存関係の追加
  - npm scriptsの設定（dev, build, preview, lint, type-check）
  - **予想時間**: 1時間
  - **完了条件**: `npm run dev`でアプリが起動する

### Task 1.2: ビルドツール設定

- [ ] **T002**: `vite.config.ts`の作成
  - React plugin設定
  - TypeScript設定
  - パス解決設定
  - **予想時間**: 30分
  - **完了条件**: TypeScriptエラーなしでビルドが通る

### Task 1.3: TypeScript設定

- [ ] **T003**: `tsconfig.json`の作成
  - strict mode有効化
  - パス設定（@/ alias等）
  - **予想時間**: 30分
  - **完了条件**: 型チェックエラーが解消される

### Task 1.4: Tailwind CSS設定

- [ ] **T004**: Tailwind CSS設定
  - `tailwind.config.js`作成
  - `src/styles/globals.css`設定
  - shadcn/ui用の設定追加
  - **予想時間**: 45分
  - **完了条件**: スタイルが正しく適用される

---

## Phase 2: コア機能修正・実装

**優先度: 🟡 High**

### Task 2.1: 難易度「むずかしい」仕様変更

- [ ] **T005**: quizLogic.tsの修正
  - 「むずかしい」で複合タイプのみ出題するよう変更（40% → 100%）
  - 問題生成ロジック調整
  - **予想時間**: 1時間
  - **完了条件**: 「むずかしい」で複合タイプのみ出題される

### Task 2.2: TypeIconコンポーネント改善

- [ ] **T006**: type_table.pngを参考にしたアイコン実装
  - `docs/type_table.png`の分析
  - SVGベースのタイプアイコン作成
  - 現在の絵文字ベース実装からの置き換え
  - **予想時間**: 3時間
  - **完了条件**: 18種類全てのタイプが正しいアイコンで表示される

### Task 2.3: 不足コンポーネント実装

- [ ] **T007**: ResultScreenコンポーネント確認・実装
  - 最終結果表示機能
  - 再挑戦・メニュー戻り機能
  - **予想時間**: 2時間
  - **完了条件**: クイズ完了後に結果画面が表示される

---

## Phase 3: アニメーション実装・改善

**優先度: 🟢 Medium**

### Task 3.1: タイプ別アニメーション実装

- [ ] **T008**: 18種類のタイプ別アニメーション実装
  - requirements.mdの3.3節に従った詳細アニメーション
  - CSS3 + JavaScript (requestAnimationFrame)使用
  - 60fps維持
  - **予想時間**: 6時間
  - **完了条件**: 各タイプに特徴的なアニメーションが実装される

### Task 3.2: 攻撃アニメーション詳細実装

- [ ] **T009**: AttackAnimationコンポーネント改善
  - 3段階アニメーション（移動→衝突→結果）のタイミング調整
  - より豊富なエフェクト追加
  - 複合タイプ対応の確認
  - **予想時間**: 3時間
  - **完了条件**: アニメーションが要件通りの時間で実行される

---

## Phase 4: UI/UX改善・レスポンシブ対応

**優先度: 🟢 Medium**

### Task 4.1: レスポンシブデザイン実装

- [ ] **T010**: モバイル対応
  - スマートフォン向けレイアウト調整
  - タッチ操作最適化
  - **予想時間**: 2時間
  - **完了条件**: スマートフォンでも快適に操作できる

### Task 4.2: アクセシビリティ対応

- [ ] **T011**: アクセシビリティ改善
  - キーボードナビゲーション対応
  - ARIAラベル追加
  - カラーコントラスト確認
  - **予想時間**: 2時間
  - **完了条件**: アクセシビリティ監査をパスする

---

## Phase 5: 品質保証・テスト

**優先度: 🟡 High**

### Task 5.1: テスト環境構築

- [ ] **T012**: テストフレームワーク設定
  - Jest + React Testing Library設定
  - テスト用npm script追加
  - **予想時間**: 1時間
  - **完了条件**: `npm test`でテストが実行できる

### Task 5.2: 単体テスト実装

- [ ] **T013**: ビジネスロジックのテスト
  - quizLogic.tsの関数テスト
  - タイプ相性計算の正確性確認
  - 問題生成ロジックテスト
  - **予想時間**: 3時間
  - **完了条件**: カバレッジ80%以上

### Task 5.3: コンポーネントテスト実装

- [ ] **T014**: Reactコンポーネントテスト
  - 主要コンポーネントの動作テスト
  - ユーザーインタラクションテスト
  - **予想時間**: 4時間
  - **完了条件**: 主要機能がテストでカバーされる

### Task 5.4: E2Eテスト実装

- [ ] **T015**: エンドツーエンドテスト
  - Playwright等でのユーザーフロー確認
  - クイズの完全フロー動作確認
  - **予想時間**: 3時間
  - **完了条件**: 主要ユーザーフローが自動テストされる

---

## Phase 6: 受け入れテスト・リリース準備

**優先度: 🟢 Medium**

### Task 6.1: 受け入れ基準確認

- [ ] **T016**: requirements.md第5節の受け入れ基準チェック
  - 全168項目のチェックリスト実施
  - 不具合修正
  - **予想時間**: 4時間
  - **完了条件**: 全受け入れ基準をクリア

### Task 6.2: パフォーマンス最適化

- [ ] **T017**: パフォーマンス監査・改善
  - Web Vitals確認
  - バンドルサイズ最適化
  - アニメーション最適化
  - **予想時間**: 2時間
  - **完了条件**: Lighthouse スコア90点以上

### Task 6.3: ブラウザ互換性確認

- [ ] **T018**: マルチブラウザテスト
  - Chrome, Firefox, Safari, Edge確認
  - モバイルブラウザ確認
  - **予想時間**: 2時間
  - **完了条件**: 対象ブラウザ全てで動作する

---

## Phase 7: UI/UXの改善

**優先度: 🟢 Medium**

### Task 7.1: 全体的なUI/UX改善

- [ ] **T019**: 全体的なUI/UX改善
  - 全体的に見た目が簡素すぎるので、機能は損なわないように、もっとレイアウトをリッチにしたい（material-uiをベースにする）
  - 全体的にアイコンや文字が小さいので、モバイル版のレイアウトもしっかり考慮しつつ、全体的にサイズを大きくする
  - **予想時間**: 1時間
  - **完了条件**: 改善ポイントの実装全完了およびテストのクリア

### Task 7.2: StartScreenのUI/UX改善

- [ ] **T020**: `StartScreen`のUI/UX改善
  - タイプアイコンデモンストレーションは全てのタイプを表示するようにして、右から左へ流れていくようなアニメーションを実装する
  - クイズの難易度設定を行うセレクトボックスと、問題数の難易度設定を行うセレクトボックスを開いた際に、コンテンツの背景が透けているため、下のレイヤーの文字と被っている。セレクトボックスの背景を透過させないようにする
  - 「クイズを開始するボタン」が一目でボタンとわかりづらい。押せるボタンだということをもっと強調する
  - **予想時間**: 1時間
  - **完了条件**: 改善ポイントの実装全完了およびテストのクリア

### Task 7.3: QuizScreenのUI/UX改善

- [ ] **T021**: `QuizScreen`のUI/UX改善
  - アニメーション終了後3秒後に自動的に次の問題に遷移する機能を削除する
  - クイズを中断する際のダイアログの背景が透けてしまっているため、下のレイヤーと文字が被ってしまっている。背景を透過させないようにする
  - **予想時間**: 0.5時間
  - **完了条件**: 改善ポイントの実装全完了およびテストのクリア

### Task 7.4: AttackAnimationのUI/UX改善

- [ ] **T022**: `AttackAnimation`のUI/UX改善
  - 攻撃側のアイコンと防御側のアイコンの高さが合っていないので、高さを合わせる（攻撃側の方が少し高さが低い）
  - ダメージ倍率の6種類ごとにインパクトエフェクトを変える。例えば、こうかばつぐん時は"より激しめのエフェクト"にして、こうかいまひとつは"おとなしめのエフェクト"にすることで、ダメージ倍率の強弱をエフェクトで表現する
  - **予想時間**: 1時間
  - **完了条件**: 改善ポイントの実装全完了およびテストのクリア

### Task 7.5: ResultScreenのUI/UX改善

- [ ] **T023**: `ResultScreen`のUI/UX改善
  - スコアグレードの"S"、"A"、"B"、"C"、"D"の表示は不要。"ポケモンマスター！"などの文字を表示するだけでよい。
  - **予想時間**: 0.5時間
  - **完了条件**: 改善ポイントの実装全完了およびテストのクリア

### Task 7.6: 要件定義と設計の更新

- [ ] **T024**: `requirement.md`と`design.md`へのUI/UX改善ポイントの追記
  - Phase7のUI/UX改善ポイントは、要件や設計にも影響するため、`requirement.md`と`design.md`を更新することで、ドキュメントの最新化を実施する
  - **予想時間**: 0.1時間
  - **完了条件**: `requirement.md`と`design.md`の更新完了

---

## 推奨作業順序

### Week 1: 基盤構築（Phase 1-2）

1. **T001-T004**: プロジェクト環境構築
2. **T005**: 難易度仕様変更
3. **T006**: TypeIcon実装

### Week 2: 機能完成（Phase 3-4）

4. **T007**: 不足コンポーネント
5. **T008-T009**: アニメーション実装
6. **T010-T011**: UI/UX改善

### Week 3: 品質確保（Phase 5-6）

7. **T012-T015**: テスト実装
8. **T016-T018**: 受け入れテスト・最適化

## リスク・注意事項

### 高リスクタスク

- **T006 (TypeIcon実装)**: type_table.pngの解析・SVG化が困難な可能性
- **T008 (タイプ別アニメーション)**: パフォーマンス要件（60fps）達成の難易度

### 技術的課題

- motion/reactライブラリの依存関係問題
- 複合タイプのアニメーション表示方法
- レガシーブラウザでのCSS3アニメーション互換性

### 変更管理

- 要件変更時はrequirements.md更新後にタスク再評価
- 設計変更時はdesign.md更新とタスク影響範囲確認

---

## 完了基準

プロジェクト完了の定義:

1. 全受け入れ基準（requirements.md 第5節）のクリア
2. テストカバレッジ80%以上
3. Lighthouse パフォーマンススコア90点以上
4. 対象ブラウザでの正常動作確認
5. アクセシビリティ監査パス

**総予想開発時間**: 約36時間（3-4週間想定）
