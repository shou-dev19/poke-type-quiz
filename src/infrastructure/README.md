# Infrastructure Layer

このディレクトリには、ドメイン層のサービスインターフェースの具体的な実装が含まれています。インフラ層は外部リソース（データベース、ファイルシステム、Web API等）へのアクセスを担当し、ドメイン層から技術的な詳細を分離します。

## 実装クラス

### TypeEffectivenessService
`ITypeEffectivenessService`の実装クラス。ポケモンタイプ相性の計算ロジックを提供します。

**特徴:**
- タイプ相性マトリックスに基づく高速計算
- 複合タイプの相性計算をサポート
- メモ化によるパフォーマンス最適化

### FileTypeRepository
`ITypeRepository`の実装クラス。JSONファイルからポケモンタイプデータを読み込みます。

**特徴:**
- 静的タイプデータファイルからの読み込み
- キャッシュ機能による高速アクセス
- タイプデータの検証とエラーハンドリング

### QuestionGeneratorService
`IQuestionGeneratorService`の実装クラス。ランダムかつバランスの取れた問題を生成します。

**特徴:**
- 擬似乱数による再現可能な問題生成
- 難易度別の問題バランス調整
- 重複回避とタイプ分散の最適化

## 設計パターン

### Repository Pattern
データアクセスロジックをカプセル化し、ドメイン層から技術的詳細を隠蔽します。

### Service Pattern
複雑なビジネスロジックを専用サービスクラスにまとめ、再利用性を向上させます。

### Dependency Injection
DIコンテナを通じて依存関係を注入し、テスタビリティと拡張性を確保します。

## データファイル

### types.json
ポケモンタイプの基本情報（名前、色、シンボル等）を格納。

### effectiveness.json
タイプ相性マトリックスを格納。18x18の効果値マップ。

## テスト戦略

各実装クラスには対応する単体テストが存在し、以下をカバーします：
- 正常系・異常系の動作検証
- エラーハンドリングの確認
- パフォーマンス要件の検証
- モックを使用した依存関係の分離