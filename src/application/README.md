# Application Layer

このディレクトリには、アプリケーション層の実装が含まれています。アプリケーション層は、ドメイン層とインフラ層を組み合わせて、具体的なユースケースを実現します。

## 構成要素

### UseCases
ビジネスユースケースの実装。各ユースケースは単一の責任を持ち、ドメインサービスとリポジトリを組み合わせてビジネスロジックを実行します。

**主要ユースケース:**
- `GameSessionUseCase`: ゲームセッションの作成、開始、進行、終了を管理
- `QuestionManagementUseCase`: 問題の生成、取得、回答処理を管理  
- `TypeManagementUseCase`: ポケモンタイプの取得、検索、フィルタリングを管理

### Interfaces
外部システム（プレゼンテーション層）との境界を定義するインターフェース。

**主要インターフェース:**
- Input/Output DTOs: データ転送オブジェクト
- Use Case Interfaces: ユースケースの契約定義
- External Service Interfaces: 外部サービスとの連携

## 設計原則

### 1. 単一責任の原則 (SRP)
各ユースケースは単一の機能に集中し、明確に定義された責任を持ちます。

### 2. 依存関係逆転の原則 (DIP)
ユースケースはドメインサービスのインターフェースに依存し、具体的な実装には依存しません。

### 3. インターフェース分離の原則 (ISP)
各ユースケースインターフェースは、使用者が必要とする機能のみを公開します。

## データフロー

1. **入力**: プレゼンテーション層からのリクエスト
2. **処理**: ドメインサービスとエンティティを使用したビジネスロジック実行
3. **出力**: プレゼンテーション層への結果返却

## エラーハンドリング

- ビジネスルール違反は適切なエラーメッセージと共に例外を投げる
- バリデーション失敗は詳細な情報を含むエラーを返す
- システムエラーは適切にログ記録し、ユーザーフレンドリーなメッセージを提供

## テスト戦略

各ユースケースには対応する単体テストが存在し、以下をカバーします：
- 正常系のビジネスフロー検証
- 異常系のエラーハンドリング確認
- 境界値テスト
- モックを使用した依存関係の分離